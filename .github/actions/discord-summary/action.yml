name: "Send Test Summary to Discord"
description: "Send formatted test summary to Discord"
inputs:
  passed:
    required: true
  failed:
    required: true
  skipped:
    required: true
  total:
    required: true
  browser:
    required: true
runs:
  using: "composite"
  steps:
    - name: Build and Send Discord Message
      shell: bash
      run: |
        pass_percentage=$(awk "BEGIN {print (${{ inputs.passed }}/${{ inputs.total }})*100}")
        fail_percentage=$(awk "BEGIN {print (${{ inputs.failed }}/${{ inputs.total }})*100}")

        content="-----------------------------------\n\n"
        content+="ğŸ› ï¸ **Job: ${{ github.job }}**\n"
        content+="ğŸ‘¤ **User: ${{ github.actor }}**\n"
        content+="ğŸŒ **Browser: ${{ inputs.browser }}**\n"
        content+="ğŸ‰ **Passed**: ${{ inputs.passed }}\n"
        content+="âŒ **Failed**: ${{ inputs.failed }}\n"
        content+="âš ï¸ **Skipped**: ${{ inputs.skipped }}\n"
        content+="ğŸ“Š **Total**: ${{ inputs.total }}\n\n"
        content+="âœ… **Pass %**: ${pass_percentage}%\n"
        content+="âŒ **Fail %**: ${fail_percentage}%\n\n"
        content+="-----------------------------------\n\n"

        curl --location "$DISCORD_WEBHOOK_URL" \
             --header 'Content-Type: application/json' \
             --data-raw "{
               \"content\": \"$content\",
               \"username\": \"TestBot\"
             }"
